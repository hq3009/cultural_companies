# 宁波市文化企业数据仓库项目

## 项目概述

本项目是一个完整的文化企业数据仓库解决方案，旨在为宁波市文化企业提供全方位的数据管理和分析服务。项目通过整合多源异构数据，构建了从数据采集、清洗、建模到统计分析的完整数据链路，为文化企业的监管、服务和发展提供数据支撑。

## 项目架构

```
cultural_companies/
├── assets/                    # 原始数据资源
├── bigfiles/                  # 大数据文件存储
├── columns.md                 # 数据字典文档
├── industry_codes/            # 行业代码分类
├── local_db/                  # 本地数据库脚本
├── pyscripts/                 # Python数据处理脚本
├── resources/                 # 资源文件
├── src_cloud/                 # 云端数据处理SQL
├── src_local/                 # 本地数据处理SQL
└── test/                      # 测试文件
```

## 核心功能模块

### 1. 数据建模层
- **数据字典管理** (`columns.md`)
  - 62个核心数据表的完整字段定义
  - 标准化字段命名规范
  - 数据类型和约束定义
  - 业务规则说明

- **数据库设计** (`local_db/`, `src_local/`, `src_cloud/`)
  - MySQL数据库结构定义
  - 本地和云端双环境支持
  - 完整的建表和数据初始化脚本

### 2. 数据处理层
- **Python脚本** (`pyscripts/`)
  - `data_preparing.py`: 数据预处理和清洗
  - `generate_fake_data.py`: 测试数据生成
  - `backup_database.py`: 数据库备份
  - `batch_update_table.py`: 批量数据更新
  - `extract_field_mapping.py`: 字段映射提取

- **SQL处理脚本**
  - `01_ent.sql`: 企业基础信息表创建
  - `02_ent_ext.sql`: 企业扩展信息聚合
  - `03_stats_general.sql`: 通用统计分析
  - `04_stats_wenhua.sql`: 文化企业统计
  - `05_stats_lvyou.sql`: 旅游企业统计
  - `06_stats_wenhua_lvyou.sql`: 文旅融合统计

### 3. 行业分类体系
- **文化行业代码** (`industry_codes/wenhua.txt`)
  - 涵盖文化制造、文化服务、文化创意等
  - 支持细分的行业分类统计

- **旅游行业代码** (`industry_codes/lvyou.txt`)
  - 旅游服务、住宿餐饮、交通等
  - 与文化产业交叉分析

- **文旅融合代码** (`industry_codes/wenhua_lvyou.txt`)
  - 文化+旅游融合业态
  - 新兴业态识别和统计

### 4. 数据源整合
- **市场监管数据** (SCJDGL)
  - 企业注册、变更、注销信息
  - 经营异常、行政处罚记录
  - 股权变更、行政许可信息

- **财税金融数据** (SW/YBJ)
  - 税务登记、纳税记录
  - 社保缴纳、公积金信息
  - 金融许可证管理

- **科技服务数据** (KJ)
  - 高新技术企业认定
  - 科技型企业发展跟踪

- **信用评价数据** (DSJ/JT)
  - 企业信用评级
  - 资质证书管理
  - 失信记录跟踪

## 技术特色

### 数据标准化
- **统一标识体系**: 以统一社会信用代码为核心关联键
- **字段命名规范**: 英文标准化命名，支持业务语义理解
- **数据类型统一**: 统一的数据类型定义和约束规则

### 多环境支持
- **本地开发环境**: 支持本地MySQL数据库开发和测试
- **云端生产环境**: 支持云端数据库部署和运维
- **数据同步机制**: 本地和云端数据一致性保障

### 行业分类体系
- **文化行业**: 涵盖文化制造、文化服务、文化创意等细分领域
- **旅游行业**: 包含旅游服务、住宿餐饮、交通等相关业态
- **文旅融合**: 识别和统计文化+旅游融合发展的新兴业态

## 使用指南

### 环境准备
1. **数据库环境**: MySQL 8.0+
2. **Python环境**: Python 3.7+
3. **依赖包**: pandas, pymysql等

### 数据初始化
```bash
# 1. 创建数据库
mysql -u root -p < local_db/cul_comp_db.sql

# 2. 运行数据处理脚本
python pyscripts/data_preparing.py

# 3. 执行统计分析
mysql -u root -p cul_comp < src_local/03_stats_general.sql
```

### 数据查询
- **企业基础信息**: 通过统一社会信用代码查询企业全量信息
- **行业统计分析**: 按文化、旅游、文旅融合等维度进行统计
- **信用评价查询**: 查询企业信用等级和资质信息

## 数据质量保障

- **数据完整性**: 建立数据完整性检查机制
- **数据准确性**: 多源数据交叉验证和清洗
- **数据时效性**: 支持实时和批量数据更新
- **数据一致性**: 统一的数据标准和业务规则

## 项目维护

### 版本管理
- 采用Git进行版本控制
- 详细记录每次数据模型变更
- 支持数据模型回滚和恢复

### 数据更新
- 定期更新行业代码分类
- 持续优化数据处理脚本
- 扩展新的数据源和统计维度

## 联系方式

如有问题或建议，请联系项目维护团队。

---

*最后更新时间: 2024年*